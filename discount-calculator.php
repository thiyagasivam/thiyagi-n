<?php include 'header.php'; ?>

<!-- Advanced Discount Calculator Meta Tags -->
<head>
    <!-- Primary Meta Tags -->
    <title>Free Advanced Discount Calculator 2025 - Calculate Savings & Sale Prices Instantly</title>
    <meta name="title" content="Free Advanced Discount Calculator 2025 - Calculate Savings & Sale Prices Instantly">
    <meta name="description" content="Professional discount calculator for percentage, fixed amount, bulk discounts & buy-get offers. Calculate sale prices, savings & final costs instantly. Free tool for shoppers & businesses.">
    <meta name="keywords" content="discount calculator, percentage discount, sale price calculator, savings calculator, bulk discount, buy one get one, BOGO calculator, price reduction, coupon calculator, shopping calculator, business discount tool, markdown calculator">
    <meta name="author" content="Thiyagi Calculator Tools">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://thiyagi.com/discount-calculator.php">
    <meta property="og:title" content="Free Advanced Discount Calculator 2025 - Calculate Savings & Sale Prices">
    <meta property="og:description" content="Professional discount calculator supporting percentage, fixed amount, bulk discounts & promotional offers. Calculate accurate sale prices and savings instantly.">
    <meta property="og:image" content="https://www.thiyagi.com/nt.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Thiyagi Calculator Tools">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://thiyagi.com/discount-calculator.php">
    <meta property="twitter:title" content="Free Advanced Discount Calculator 2025 - Calculate Savings & Sale Prices">
    <meta property="twitter:description" content="Professional discount calculator supporting percentage, fixed amount, bulk discounts & promotional offers. Calculate accurate sale prices and savings instantly.">
    <meta property="twitter:image" content="https://www.thiyagi.com/nt.png">
    <meta property="twitter:creator" content="@ThiyagiTools">
    <meta property="twitter:site" content="@ThiyagiTools">
    
    <!-- LinkedIn -->
    <meta property="linkedin:owner" content="ThiyagiCalculatorTools">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#10B981">
    <meta name="msapplication-TileColor" content="#10B981">
    <meta name="application-name" content="Discount Calculator">
    
    <!-- Structured Data for Rich Snippets -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Advanced Discount Calculator 2025",
        "description": "Professional discount calculator for percentage, fixed amount, bulk discounts and promotional offers",
        "url": "https://thiyagi.com/discount-calculator.php",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "All",
        "permissions": "browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "creator": {
            "@type": "Organization",
            "name": "Thiyagi Calculator Tools",
            "url": "https://thiyagi.com"
        },
        "featureList": [
            "Percentage discount calculation",
            "Fixed amount discount calculation", 
            "Bulk quantity discount calculation",
            "Buy X Get Y free calculation",
            "Savings percentage calculation",
            "Final price calculation"
        ],
        "screenshot": "https://www.thiyagi.com/nt.png"
    }
    </script>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://thiyagi.com/discount-calculator.php">
    
    <!-- Alternate Languages (if applicable) -->
    <link rel="alternate" hreflang="en" href="https://thiyagi.com/discount-calculator.php">
    <link rel="alternate" hreflang="x-default" href="https://thiyagi.com/discount-calculator.php">
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <!-- Favicon Links -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Mobile App Meta -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Discount Calculator">
    
    <!-- Performance & Security -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https: data:">
    
    <!-- Additional Business Meta -->
    <meta name="classification" content="Business Tools, Finance, Shopping">
    <meta name="coverage" content="Worldwide">
    <meta name="target" content="shoppers, businesses, retailers, consumers">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    
    <!-- Google Site Verification (replace with actual verification code) -->
    <!-- <meta name="google-site-verification" content="your-verification-code"> -->
    
    <!-- Bing Webmaster Tools (replace with actual verification code) -->
    <!-- <meta name="msvalidate.01" content="your-verification-code"> -->
    
    <!-- Analytics and Tracking (uncomment when needed) -->
    <!-- <meta name="google-analytics" content="your-ga-id"> -->
    
    <!-- Additional Structured Data for Calculator Tool -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Discount Calculator Tool",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web Browser",
        "url": "https://thiyagi.com/discount-calculator.php",
        "author": {
            "@type": "Organization",
            "name": "Thiyagi"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "150",
            "bestRating": "5",
            "worstRating": "1"
        },
        "offers": {
            "@type": "Offer",
            "price": "0.00",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock"
        }
    }
    </script>
</head>

<?php
/**
 * Advanced Discount Calculator 2025
 * Professional discount and savings calculator tool
 */

class AdvancedDiscountCalculator {
    public $calculationTypes = [
        'percentage' => [
            'name' => 'Percentage Discount',
            'description' => 'Calculate discount based on percentage off',
            'fields' => ['originalPrice', 'discountPercent']
        ],
        'fixed_amount' => [
            'name' => 'Fixed Amount Discount',
            'description' => 'Calculate discount with fixed dollar amount off',
            'fields' => ['originalPrice', 'discountAmount']
        ],
        'bulk_discount' => [
            'name' => 'Bulk/Quantity Discount',
            'description' => 'Calculate savings for multiple items',
            'fields' => ['originalPrice', 'quantity', 'discountPercent']
        ],
        'buy_get' => [
            'name' => 'Buy X Get Y Free',
            'description' => 'Calculate savings for buy X get Y free offers',
            'fields' => ['originalPrice', 'buyQuantity', 'getQuantity', 'totalQuantity']
        ]
    ];

    public function validateInput($data) {
        $errors = [];
        $calculationType = $data['calculation_type'] ?? '';
        
        if (!isset($this->calculationTypes[$calculationType])) {
            $errors[] = "Invalid calculation type selected.";
            return $errors;
        }
        
        $requiredFields = $this->calculationTypes[$calculationType]['fields'];
        
        foreach ($requiredFields as $field) {
            if (!isset($data[$field]) || $data[$field] === '') {
                $errors[] = ucfirst(str_replace(['_', 'original'], [' ', 'Original '], $field)) . " is required.";
                continue;
            }
            
            $value = floatval($data[$field]);
            
            switch ($field) {
                case 'originalPrice':
                    if ($value <= 0) {
                        $errors[] = "Original price must be greater than 0.";
                    }
                    break;
                
                case 'discountPercent':
                    if ($value < 0 || $value > 100) {
                        $errors[] = "Discount percentage must be between 0 and 100.";
                    }
                    break;
                
                case 'discountAmount':
                    if ($value < 0) {
                        $errors[] = "Discount amount must be 0 or greater.";
                    }
                    break;
                
                case 'quantity':
                case 'buyQuantity':
                case 'getQuantity':
                case 'totalQuantity':
                    if ($value <= 0 || $value != intval($value)) {
                        $errors[] = ucfirst(str_replace('_', ' ', $field)) . " must be a positive integer.";
                    }
                    break;
            }
        }
        
        return $errors;
    }
    
    public function calculate($data) {
        $errors = $this->validateInput($data);
        if (!empty($errors)) {
            return ['success' => false, 'errors' => $errors];
        }
        
        $calculationType = $data['calculation_type'];
        
        switch ($calculationType) {
            case 'percentage':
                return $this->calculatePercentageDiscount($data);
            case 'fixed_amount':
                return $this->calculateFixedAmountDiscount($data);
            case 'bulk_discount':
                return $this->calculateBulkDiscount($data);
            case 'buy_get':
                return $this->calculateBuyGetDiscount($data);
            default:
                return ['success' => false, 'errors' => ['Unknown calculation type.']];
        }
    }
    
    private function calculatePercentageDiscount($data) {
        $originalPrice = floatval($data['originalPrice']);
        $discountPercent = floatval($data['discountPercent']);
        
        $discountAmount = $originalPrice * ($discountPercent / 100);
        $finalPrice = $originalPrice - $discountAmount;
        $savingsPercent = $discountPercent;
        
        return [
            'success' => true,
            'result' => [
                'original_price' => $originalPrice,
                'discount_percent' => $discountPercent,
                'discount_amount' => $discountAmount,
                'final_price' => $finalPrice,
                'total_savings' => $discountAmount,
                'savings_percent' => $savingsPercent,
                'calculation_type' => 'Percentage Discount',
                'formula' => "Final Price = $originalPrice - ($originalPrice Ã— {$discountPercent}%)"
            ]
        ];
    }
    
    private function calculateFixedAmountDiscount($data) {
        $originalPrice = floatval($data['originalPrice']);
        $discountAmount = floatval($data['discountAmount']);
        
        if ($discountAmount > $originalPrice) {
            return [
                'success' => false,
                'errors' => ['Discount amount cannot be greater than original price.']
            ];
        }
        
        $finalPrice = $originalPrice - $discountAmount;
        $savingsPercent = ($discountAmount / $originalPrice) * 100;
        
        return [
            'success' => true,
            'result' => [
                'original_price' => $originalPrice,
                'discount_amount' => $discountAmount,
                'final_price' => $finalPrice,
                'total_savings' => $discountAmount,
                'savings_percent' => $savingsPercent,
                'calculation_type' => 'Fixed Amount Discount',
                'formula' => "Final Price = $originalPrice - $discountAmount"
            ]
        ];
    }
    
    private function calculateBulkDiscount($data) {
        $originalPrice = floatval($data['originalPrice']);
        $quantity = intval($data['quantity']);
        $discountPercent = floatval($data['discountPercent']);
        
        $totalOriginalPrice = $originalPrice * $quantity;
        $discountAmount = $totalOriginalPrice * ($discountPercent / 100);
        $finalPrice = $totalOriginalPrice - $discountAmount;
        $pricePerItem = $finalPrice / $quantity;
        
        return [
            'success' => true,
            'result' => [
                'original_price' => $originalPrice,
                'quantity' => $quantity,
                'discount_percent' => $discountPercent,
                'total_original_price' => $totalOriginalPrice,
                'discount_amount' => $discountAmount,
                'final_price' => $finalPrice,
                'price_per_item' => $pricePerItem,
                'total_savings' => $discountAmount,
                'savings_percent' => $discountPercent,
                'calculation_type' => 'Bulk/Quantity Discount',
                'formula' => "Total Price = ($originalPrice Ã— $quantity) - (Total Ã— {$discountPercent}%)"
            ]
        ];
    }
    
    private function calculateBuyGetDiscount($data) {
        $originalPrice = floatval($data['originalPrice']);
        $buyQuantity = intval($data['buyQuantity']);
        $getQuantity = intval($data['getQuantity']);
        $totalQuantity = intval($data['totalQuantity']);
        
        // Calculate how many complete sets of buy X get Y free
        $completeSets = floor($totalQuantity / ($buyQuantity + $getQuantity));
        $remainingItems = $totalQuantity % ($buyQuantity + $getQuantity);
        
        // Items you pay for
        $paidItems = ($completeSets * $buyQuantity) + min($remainingItems, $buyQuantity);
        
        // Free items received
        $freeItems = $totalQuantity - $paidItems;
        
        $totalOriginalPrice = $totalQuantity * $originalPrice;
        $finalPrice = $paidItems * $originalPrice;
        $totalSavings = $freeItems * $originalPrice;
        $savingsPercent = ($totalSavings / $totalOriginalPrice) * 100;
        
        return [
            'success' => true,
            'result' => [
                'original_price' => $originalPrice,
                'buy_quantity' => $buyQuantity,
                'get_quantity' => $getQuantity,
                'total_quantity' => $totalQuantity,
                'paid_items' => $paidItems,
                'free_items' => $freeItems,
                'total_original_price' => $totalOriginalPrice,
                'final_price' => $finalPrice,
                'total_savings' => $totalSavings,
                'savings_percent' => $savingsPercent,
                'calculation_type' => 'Buy X Get Y Free',
                'formula' => "Buy $buyQuantity, Get $getQuantity Free (Total: $totalQuantity items)"
            ]
        ];
    }
}

// Process form submission
$calculator = new AdvancedDiscountCalculator();
$result = null;

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $result = $calculator->calculate($_POST);
}
?>

<main class="container mx-auto px-4 py-8 max-w-6xl">
    <!-- Header Section -->
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-gray-800 mb-4">
            <i class="fas fa-tags text-green-600 mr-3"></i>
            Advanced Discount Calculator 2025
        </h1>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Professional discount calculator for all types of savings - percentage, fixed amount, bulk discounts, and special offers
        </p>
        
        <!-- Key Features -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
            <div class="bg-green-50 p-4 rounded-lg">
                <i class="fas fa-percentage text-green-600 text-2xl mb-2"></i>
                <h3 class="font-semibold text-gray-800">Percentage Off</h3>
                <p class="text-sm text-gray-600">Standard % discounts</p>
            </div>
            <div class="bg-blue-50 p-4 rounded-lg">
                <i class="fas fa-dollar-sign text-blue-600 text-2xl mb-2"></i>
                <h3 class="font-semibold text-gray-800">Fixed Amount</h3>
                <p class="text-sm text-gray-600">Dollar amount off</p>
            </div>
            <div class="bg-purple-50 p-4 rounded-lg">
                <i class="fas fa-boxes text-purple-600 text-2xl mb-2"></i>
                <h3 class="font-semibold text-gray-800">Bulk Discount</h3>
                <p class="text-sm text-gray-600">Quantity-based savings</p>
            </div>
            <div class="bg-orange-50 p-4 rounded-lg">
                <i class="fas fa-gift text-orange-600 text-2xl mb-2"></i>
                <h3 class="font-semibold text-gray-800">Buy X Get Y</h3>
                <p class="text-sm text-gray-600">Special promotional offers</p>
            </div>
        </div>
    </div>

    <?php if ($result && !$result['success']): ?>
        <div class="bg-red-50 border-l-4 border-red-400 p-4 mb-6">
            <div class="flex">
                <div class="flex-shrink-0">
                    <i class="fas fa-exclamation-circle text-red-400"></i>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-red-800">Input Errors:</h3>
                    <ul class="mt-2 text-sm text-red-700 list-disc list-inside">
                        <?php foreach ($result['errors'] as $error): ?>
                            <li><?php echo htmlspecialchars($error); ?></li>
                        <?php endforeach; ?>
                    </ul>
                </div>
            </div>
        </div>
    <?php endif; ?>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Calculator Form -->
        <div class="lg:col-span-2">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">
                    <i class="fas fa-calculator text-green-600 mr-2"></i>
                    Discount Calculator
                </h2>
                
                <form method="POST" class="space-y-6">
                    <!-- Calculation Type Selection -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Discount Type</label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <?php foreach ($calculator->calculationTypes as $type => $info): ?>
                                <div class="relative">
                                    <input type="radio" name="calculation_type" value="<?php echo $type; ?>" 
                                           id="calc_<?php echo $type; ?>" 
                                           class="sr-only peer"
                                           <?php echo (isset($_POST['calculation_type']) && $_POST['calculation_type'] === $type) ? 'checked' : ''; ?>
                                           onchange="updateFormFields()">
                                    <label for="calc_<?php echo $type; ?>" 
                                           class="flex flex-col p-4 bg-white border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-green-50 peer-checked:border-green-500 peer-checked:bg-green-50 transition-all">
                                        <span class="font-medium text-gray-900"><?php echo $info['name']; ?></span>
                                        <span class="text-sm text-gray-500 mt-1"><?php echo $info['description']; ?></span>
                                    </label>
                                </div>
                            <?php endforeach; ?>
                        </div>
                    </div>

                    <!-- Dynamic Form Fields -->
                    <div id="dynamic-fields" class="space-y-4">
                        <p class="text-gray-500 italic">Please select a discount type above.</p>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" 
                            class="w-full bg-gradient-to-r from-green-600 to-green-700 text-white font-medium py-3 px-6 rounded-lg hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-[1.02]">
                        <i class="fas fa-calculator mr-2"></i>
                        Calculate Discount & Savings
                    </button>
                </form>
            </div>
        </div>

        <!-- Results Panel -->
        <div class="space-y-6">
            <!-- Results Display -->
            <?php if ($result && $result['success']): ?>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">
                        <i class="fas fa-receipt text-green-600 mr-2"></i>
                        Discount Results
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- Main Results -->
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-2">Final Price</h4>
                            <div class="text-3xl font-bold text-green-900">
                                $<?php echo number_format($result['result']['final_price'], 2); ?>
                            </div>
                        </div>

                        <div class="bg-orange-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-orange-800 mb-2">Total Savings</h4>
                            <div class="text-2xl font-bold text-orange-900">
                                $<?php echo number_format($result['result']['total_savings'], 2); ?>
                                <span class="text-lg text-orange-700">
                                    (<?php echo number_format($result['result']['savings_percent'], 1); ?>% off)
                                </span>
                            </div>
                        </div>

                        <!-- Detailed Breakdown -->
                        <div class="space-y-2">
                            <div class="bg-gray-50 p-3 rounded">
                                <span class="font-medium text-gray-600">Calculation Type:</span>
                                <div class="font-bold text-gray-900"><?php echo $result['result']['calculation_type']; ?></div>
                            </div>
                            
                            <?php if (isset($result['result']['original_price'])): ?>
                            <div class="bg-gray-50 p-3 rounded">
                                <span class="font-medium text-gray-600">Original Price:</span>
                                <div class="font-bold text-gray-900">$<?php echo number_format($result['result']['original_price'], 2); ?></div>
                            </div>
                            <?php endif; ?>

                            <?php if (isset($result['result']['quantity'])): ?>
                            <div class="bg-gray-50 p-3 rounded">
                                <span class="font-medium text-gray-600">Quantity:</span>
                                <div class="font-bold text-gray-900"><?php echo $result['result']['quantity']; ?> items</div>
                            </div>
                            <?php endif; ?>

                            <?php if (isset($result['result']['paid_items']) && isset($result['result']['free_items'])): ?>
                            <div class="bg-gray-50 p-3 rounded">
                                <span class="font-medium text-gray-600">Items Breakdown:</span>
                                <div class="font-bold text-gray-900">
                                    Pay for <?php echo $result['result']['paid_items']; ?>, Get <?php echo $result['result']['free_items']; ?> FREE
                                </div>
                            </div>
                            <?php endif; ?>
                        </div>

                        <!-- Formula Display -->
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800 mb-2">Calculation Formula</h4>
                            <p class="text-blue-900 text-sm font-mono">
                                <?php echo $result['result']['formula']; ?>
                            </p>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex space-x-2">
                            <button onclick="shareResults()" 
                                    class="flex-1 bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700 transition-colors">
                                <i class="fas fa-share mr-1"></i> Share
                            </button>
                            <button onclick="copyResults()" 
                                    class="flex-1 bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 transition-colors">
                                <i class="fas fa-copy mr-1"></i> Copy
                            </button>
                        </div>
                    </div>
                </div>
            <?php endif; ?>

            <!-- Information Panel -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">
                    <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                    Discount Types Guide
                </h3>
                
                <div class="space-y-3 text-sm text-gray-600">
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-1">Percentage Discount</h4>
                        <p>Most common type - % off the original price</p>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-1">Fixed Amount</h4>
                        <p>Specific dollar amount off (e.g., $10 off)</p>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-1">Bulk Discount</h4>
                        <p>Better pricing for larger quantities</p>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-1">Buy X Get Y Free</h4>
                        <p>Promotional offers (e.g., Buy 2 Get 1 Free)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Additional Information -->
    <div class="mt-12 bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-8">
        <div class="text-center mb-6">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Professional Discount Calculator Features</h2>
            <p class="text-lg text-gray-600 max-w-4xl mx-auto">
                Calculate accurate discounts for shopping, business pricing, and financial planning with our comprehensive tools.
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="bg-white p-6 rounded-lg shadow-sm">
                <div class="text-green-600 text-3xl mb-3">
                    <i class="fas fa-calculator"></i>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Multiple Types</h3>
                <p class="text-sm text-gray-600">Support for percentage, fixed amount, bulk, and promotional discounts</p>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-sm">
                <div class="text-blue-600 text-3xl mb-3">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Accurate Results</h3>
                <p class="text-sm text-gray-600">Precise calculations with detailed breakdown and formulas</p>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-sm">
                <div class="text-purple-600 text-3xl mb-3">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Mobile Friendly</h3>
                <p class="text-sm text-gray-600">Responsive design works perfectly on all devices</p>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-sm">
                <div class="text-orange-600 text-3xl mb-3">
                    <i class="fas fa-share-alt"></i>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Easy Sharing</h3>
                <p class="text-sm text-gray-600">Share results and calculations with others instantly</p>
            </div>
        </div>
    </div>
</main>

<script>
    class DiscountCalculator {
        constructor() {
            this.calculationTypes = {
                'percentage': {
                    'name': 'Percentage Discount',
                    'fields': ['originalPrice', 'discountPercent']
                },
                'fixed_amount': {
                    'name': 'Fixed Amount Discount',
                    'fields': ['originalPrice', 'discountAmount']
                },
                'bulk_discount': {
                    'name': 'Bulk/Quantity Discount',
                    'fields': ['originalPrice', 'quantity', 'discountPercent']
                },
                'buy_get': {
                    'name': 'Buy X Get Y Free',
                    'fields': ['originalPrice', 'buyQuantity', 'getQuantity', 'totalQuantity']
                }
            };
            
            this.fieldLabels = {
                'originalPrice': 'Original Price ($)',
                'discountPercent': 'Discount Percentage (%)',
                'discountAmount': 'Discount Amount ($)',
                'quantity': 'Quantity',
                'buyQuantity': 'Buy Quantity',
                'getQuantity': 'Get Free Quantity',
                'totalQuantity': 'Total Items Needed'
            };
        }
        
        updateFormFields() {
            const selectedType = document.querySelector('input[name="calculation_type"]:checked');
            const dynamicFields = document.getElementById('dynamic-fields');
            
            if (!selectedType) {
                dynamicFields.innerHTML = '<p class="text-gray-500 italic">Please select a discount type above.</p>';
                return;
            }
            
            const calculationType = selectedType.value;
            const fields = this.calculationTypes[calculationType].fields;
            
            let html = '<div class="grid grid-cols-1 md:grid-cols-2 gap-4">';
            
            fields.forEach(field => {
                const label = this.fieldLabels[field];
                const step = field.includes('Percent') ? '0.01' : field.includes('Price') || field.includes('Amount') ? '0.01' : '1';
                const min = field.includes('Quantity') || field.includes('Price') || field.includes('Amount') ? '0' : 
                           field.includes('Percent') ? '0' : '0';
                const max = field.includes('Percent') ? '100' : '';
                
                html += `
                    <div>
                        <label for="${field}" class="block text-sm font-medium text-gray-700 mb-1">
                            ${label}
                        </label>
                        <input type="number" 
                               name="${field}" 
                               id="${field}"
                               step="${step}" 
                               min="${min}"
                               ${max ? `max="${max}"` : ''}
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                               placeholder="Enter ${label.toLowerCase()}"
                               required>
                    </div>
                `;
            });
            
            html += '</div>';
            
            dynamicFields.innerHTML = html;
        }
    }

    const discCalc = new DiscountCalculator();

    // Initialize form fields on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateFormFields();
    });

    function updateFormFields() {
        discCalc.updateFormFields();
    }

    function shareResults() {
        <?php if ($result && $result['success']): ?>
        const text = `ðŸ’° Discount Calculation: Save $<?php echo number_format($result['result']['total_savings'], 2); ?> (<?php echo number_format($result['result']['savings_percent'], 1); ?>% off)! Final price: $<?php echo number_format($result['result']['final_price'], 2); ?>. Calculate your savings at ${window.location.href}`;
        
        if (navigator.share) {
            navigator.share({
                title: 'Discount Calculator Results',
                text: text,
                url: window.location.href
            });
        } else {
            // Fallback to copying to clipboard
            navigator.clipboard.writeText(text).then(() => {
                alert('Results copied to clipboard!');
            });
        }
        <?php endif; ?>
    }

    function copyResults() {
        <?php if ($result && $result['success']): ?>
        const text = `Discount Calculation Results:
Original Price: $<?php echo number_format($result['result']['original_price'], 2); ?>
Total Savings: $<?php echo number_format($result['result']['total_savings'], 2); ?> (<?php echo number_format($result['result']['savings_percent'], 1); ?>% off)
Final Price: $<?php echo number_format($result['result']['final_price'], 2); ?>
Type: <?php echo $result['result']['calculation_type']; ?>

Calculate at: ${window.location.href}`;
        
        navigator.clipboard.writeText(text).then(() => {
            alert('Results copied to clipboard!');
        });
        <?php endif; ?>
    }
</script>

<?php include 'footer.php'; ?>
